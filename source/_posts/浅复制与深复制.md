---
title : 浅复制与深复制
tags  : python
categories: python
---

在Python中，对对象赋值实际上是对对象的引用。
当创建一个对象，然后把它赋给另一个变量时，Python并没有拷贝这个对象，而只是拷贝了对这个对象的引用。这两个对象共用一个地址，当改变一个变量的值时，另一个变量的值也随之改变。这种就称之为浅复制。
而深复制则是指另一个对象虽然变量的值与第一个变量相同，但是两个变量所占的地址并不相同。改变一个变量的值，并不会改变另一个变量的值。

<!--more-->

### 浅复制

```python
a = [1, 2, 3, 4]
b = a
print(a)
print(b)
print(id(a))
print(id(b))
b[1] = 10
print(a)
print(b)
```
在这种情况下，列表a和列表b所指的内存是一样的，当改变列表b中元素的值时，列表a中元素的值也会随之改变。
上述程序执行的结果为：
```bash
[1, 2, 3, 4]
[1, 2, 3, 4]
1609119067848
1609119067848
[1, 10, 3, 4]
[1, 10, 3, 4]
```


### 深复制

如果想要在改变列表b的同时，并不改变列表a的元素，则需要通过深复制来实现。通过调用`copy()`方法来实现。
```python
a = [1, 2, 3, 4]
b = a.copy()
print(a)
print(b)
print(id(a))
print(id(b))
b[1] = 10
print(a)
print(b)
```
此时，列表a和列表b所指向的内存并不一样。程序的运行结果为：
```bash
[1, 2, 3, 4]
[1, 2, 3, 4]
2329682407112
2329681537672
[1, 2, 3, 4]
[1, 10, 3, 4]
```

### 小结

浅复制只是将对象的值进行了一次拷贝，并没有开辟新的内存空间，赋值前后的对象共用同一片地址，相当于对象的引用。
深复制不仅将对象的值进行了拷贝，同时也新开辟了一片内存空间，新的对象与原对象没有任何联系。