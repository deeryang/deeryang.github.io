---
title : python变量与地址的关系
tags  : python
categories: python
---

python中变量与地址的关系和其他计算机语言是不一样的。在C/C++中，系统会为每个变量分配一个内存空间，当改变变量的值时，该变量的内存空间并不会改变。但是在python中，当攻改变这个变量的值时，该变量的内存空间也会随之改变。最主要的原因是**python采用的是基于值的内存管理模式**

<!--more-->

整数在Python中使用非常广泛，为了优化速度，Python中使用了**小整数对象池**，从而避免了频繁地申请和销毁内存空间。
Python对小整数的定义是 [-5, 256]，这些整数对象是提前建立好的，不会被垃圾回收。所有位于这个范围内的整数都是同一个对象，占用相同的地址，同理，单个字母也是一样

例1：
```bash
>>> a = 1
>>> b = 1
>>> type(a)
<class 'int'>
>>> type(b)
<class 'int'>
>>> id(a)
1616866368
>>> id(b)
1616866368
```
可以看到，对变量a和变量a都赋予常量1，得到的地址都是一样的。

例2：
```bash
>>> a = 1.0
>>> b = 1.0
>>> type(a)
<class 'float'>
>>> type(b)
<class 'float'>
>>> id(a)
2812927025800
>>> id(b)
2812927025608
```
但是当变量a和变量b是`float`类型时，虽然`a = 1.0`且`b = 1.0`，但它们的地址并不一样。

例3：
```bash
>>> a = 100000
>>> b = 100000
>>> type(a)
<class 'int'>
>>> type(b)
<class 'int'>
>>> id(a)
2812959118864
>>> id(b)
2812956741424
```
当常量很大，已经超出了小整数对象池的范围时，此时赋给变量的地址也是不一样的。